<!DOCTYPE html>
<html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="user-scalable=no width=device-width, initial-scale=1.0 maximum-scale=1.0"><title></title><link rel="shortcut icon"><link href="https://fonts.googleapis.com/css?family=Crimson+Text|Montserrat:700" rel="stylesheet" type="text/css"></head><body class="landing-page"><div id="react-mount"><div data-reactid=".27y9sg2kcu8" data-react-checksum="-619387587"><nav data-reactid=".27y9sg2kcu8.1"><div data-reactid=".27y9sg2kcu8.1.0"><div data-reactid=".27y9sg2kcu8.1.0.0"><ul data-reactid=".27y9sg2kcu8.1.0.0.0"><li data-reactid=".27y9sg2kcu8.1.0.0.0.0"><a class="" href="/" data-reactid=".27y9sg2kcu8.1.0.0.0.0.0">chrisbiscardi</a></li><li data-reactid=".27y9sg2kcu8.1.0.0.0.1"><a class="" href="/talks" data-reactid=".27y9sg2kcu8.1.0.0.0.1.0">talks</a></li><li data-reactid=".27y9sg2kcu8.1.0.0.0.2"><a href="https://twitter.com/chrisbiscardi" data-reactid=".27y9sg2kcu8.1.0.0.0.2.0">twitter</a></li><li data-reactid=".27y9sg2kcu8.1.0.0.0.3"><a class="" href="/projects" data-reactid=".27y9sg2kcu8.1.0.0.0.3.0">projects</a></li><li data-reactid=".27y9sg2kcu8.1.0.0.0.4"><a class="" href="/books" data-reactid=".27y9sg2kcu8.1.0.0.0.4.0">books</a></li></ul></div></div></nav><div data-reactid=".27y9sg2kcu8.2"><div data-reactid=".27y9sg2kcu8.2.0"><div class="markdown" data-reactid=".27y9sg2kcu8.2.0.0"><h1 data-reactid=".27y9sg2kcu8.2.0.0.0">Language Comparisons 0000001</h1><div data-reactid=".27y9sg2kcu8.2.0.0.1"><p>In a thread on HN recently there was a prompt:</p>
<blockquote>
<p>Read in a file full of numbers, one number on each line<br>
Represent those numbers as integers in your program<br>
Replace each number with that number times its line number<br>
Write the file out elsewhere<br>
And complete the task right now at your computer as fast as possible, you’re being timed</p>
</blockquote>
<p>Ignoring the spurious nature of the comment (and ignoring the benefits/drawbacks of interview-programming in general) there were a few responses:</p>
<p>Consider this file for the responses:</p>
<pre><code><span class="hljs-number">1</span>
<span class="hljs-number">2</span>
<span class="hljs-number">3</span>
<span class="hljs-number">4</span>
<span class="hljs-number">5</span>
<span class="hljs-number">6</span>
<span class="hljs-number">7</span>
<span class="hljs-number">8</span>
<span class="hljs-number">9</span>
<span class="hljs-number">10</span>
</code></pre>
<h2>Python</h2>
<p>First, a sys-admin style Python script:</p>
<p>It considers lines to be 0-based. (the first line is line 0) and accepts a file as an argument.</p>
<pre><code>&lt;code <span class="hljs-keyword">class</span>=<span class="hljs-string">"python"</span>&gt;#!/usr/bin/python
import sys
with <span class="hljs-keyword">open</span>(sys.argv[1]) <span class="hljs-keyword">as</span> f:
    <span class="hljs-keyword">for</span> <span class="hljs-keyword">l</span>, i <span class="hljs-keyword">in</span> enumerate(f):
        <span class="hljs-keyword">print</span> <span class="hljs-keyword">l</span> * int(i)
</code></pre>
<p>Pretty nice overall and gives this result:</p>
<pre><code><span class="hljs-number">2</span>
<span class="hljs-number">6</span>
<span class="hljs-number">12</span>
<span class="hljs-number">20</span>
<span class="hljs-number">30</span>
<span class="hljs-number">42</span>
<span class="hljs-number">56</span>
<span class="hljs-number">72</span>
<span class="hljs-number">90</span>
</code></pre>
<h2>awk</h2>
<p>The next was awk-based:</p>
<p><code>&lt;code class=&quot;bash&quot;&gt;awk '{print $0 * NR}' nums.txt &gt; output</code></p>
<p>Very succinct. Probably the shortest (most powerful if you subscribe to that idea) response and very efficient for this use case (doubling numbers based on lines). It gives this output:</p>
<pre><code><span class="hljs-number">1</span>
<span class="hljs-number">4</span>
<span class="hljs-number">9</span>
<span class="hljs-number">16</span>
<span class="hljs-number">25</span>
<span class="hljs-number">36</span>
<span class="hljs-number">49</span>
<span class="hljs-number">64</span>
<span class="hljs-number">81</span>
<span class="hljs-number">100</span>```


<span class="hljs-preprocessor">## node.js</span>

Next up, node.js:

</code></pre>
<p><code class="javascript">var fs = require(‘fs’);
var lines = fs.readFileSync(’./nums.txt’,‘utf8’)
.trim().split(/\r\n|\r|\n/g);
for (var i=0; i&lt;lines.length; i++) {
lines[i] = i * +lines[i];
}
fs.writeFileSync(
‘./outfile.txt’
,‘utf8’
,lines.join(’\n’)
);</p>
<pre><code>
Which works, but chokes when writing <span class="hljs-operator">the</span> <span class="hljs-built_in">file</span> back out. Arguably reading/writing <span class="hljs-built_in">files</span> is more <span class="hljs-operator">of</span> <span class="hljs-operator">a</span> strength <span class="hljs-keyword">for</span> python/(bash/awk). There are many ways <span class="hljs-built_in">to</span> <span class="hljs-built_in">write</span> this code <span class="hljs-operator">in</span> js, so we’ll just skip <span class="hljs-built_in">to</span> <span class="hljs-operator">the</span> output.

</code></pre>
<p>fs.js:113
throw new Error('Unknown encoding: ’ + encoding);
^
Error: Unknown encoding: 0
2
6
12
20
30
42
56
72
90
at assertEncoding (fs.js:113:11)
at Object.fs.writeFileSync (fs.js:963:3)
at Object.<anonymous> (/Users/chris/Desktop/haskell/nums.js:7:4)
at Module._compile (module.js:456:26)
at Object.Module._extensions…js (module.js:474:10)
at Module.load (module.js:356:32)
at Function.Module._load (module.js:312:12)
at Function.Module.runMain (module.js:497:10)
at startup (node.js:119:16)
at node.js:901:3</anonymous>```</p>
<h2>Haskell</h2>
<p>Next up, a Haskell implementation:</p>
<pre><code>&lt;code <span class="hljs-type">class</span>=<span class="hljs-string">"haskell"</span> style=<span class="hljs-string">"overflow-x:scroll"</span>&gt;import Data.List

main :: IO ()
main = writeListAsLines . toDoubleList . lines =```

This <span class="hljs-keyword">is</span> probably similar <span class="hljs-keyword">to</span> <span class="hljs-keyword">the</span> code I would've written <span class="hljs-keyword">in</span> an interview environment. It can be cleaned up a bit fairly trivially though <span class="hljs-keyword">with</span> `unlines` (which I somehow forgot <span class="hljs-keyword">about</span>, <span class="hljs-keyword">then</span> remembered <span class="hljs-keyword">as</span> I was <span class="hljs-function_start"><span class="hljs-keyword">on</span></span> <span class="hljs-keyword">my</span> way <span class="hljs-keyword">to</span> lunch):

</code></pre>
<p><code class="haskell" style="overflow-x:scroll">import Data.List</p>
<p>main :: IO ()
main = writeListAsLines . toDoubleList . lines =```</p>
<p>or split up (maybe a little pathologically if you aren’t particularly happy with interview coding) to see the type signatures on everything.</p>
<pre><code>&lt;code class=<span class="hljs-string">"haskell"</span> style=<span class="hljs-string">"overflow-x:scroll"</span>&gt;<span class="hljs-keyword">import</span> Data.List

main <span class="hljs-type-annotation">::</span> <span class="hljs-built_in">IO</span> ()
main = doubleIntsInFile <span class="hljs-string">"nums.txt"</span> <span class="hljs-string">"numsout.txt"</span>

doubleIntsInFile <span class="hljs-type-annotation">::</span> FilePath -&gt; FilePath -&gt; <span class="hljs-built_in">IO</span> ()
doubleIntsInFile inFile out = writeDoubled out = <span class="hljs-built_in">String</span> -&gt; <span class="hljs-built_in">IO</span> ()
writeDoubled x = writeListAsLines x . toDoubleList . lines

toDoubleList <span class="hljs-type-annotation">::</span> [<span class="hljs-built_in">String</span>] -&gt; [<span class="hljs-built_in">Int</span>]
toDoubleList y = zipWith (*) (map read y) [<span class="hljs-number">1.</span>.length y]

writeListAsLines <span class="hljs-type-annotation">::</span> <span class="hljs-built_in">String</span> -&gt; [<span class="hljs-built_in">Int</span>] -&gt; <span class="hljs-built_in">IO</span> ()
writeListAsLines fl =  writeFile fl . mkString

mkString <span class="hljs-type-annotation">::</span> [<span class="hljs-built_in">Int</span>] -&gt; <span class="hljs-built_in">String</span>
mkString = unlines . map show
</code></pre>
<p>and the output:</p>
<pre><code>1
4
9
16
25
36
49
64
81
100<span class="hljs-code">```</span>


<span class="hljs-header">## Conclusion</span>

Draw your own. My opinion is that AWK is the best tool for this odd job with Python a close second. (When observing these answers).

Feel like code golfing a bit? Post an answer in the comments.


<span class="hljs-header"># Update</span>


<span class="hljs-header">## Perl</span>

Perl was added by [<span class="hljs-link_label">David Baker</span>](<span class="hljs-link_url">https://plus.google.com/u/0/+DavidBakerNYC/posts</span>) on the [<span class="hljs-link_label">Google+ thread</span>](<span class="hljs-link_url">https://plus.google.com/u/0/104488078938246881552/posts/Uzsf6qrRMns</span>).

<span class="hljs-code">`&lt;code class="perl"&gt;perl -lne 'print $_ * $.' `</span>

It is approximately the same level as the previous awk script and a pretty easy to understand.

</code></pre>
<p>1
4
9
16
25
36
49
64
81
100```</p>
</div><em data-reactid=".27y9sg2kcu8.2.0.0.2"><span data-reactid=".27y9sg2kcu8.2.0.0.2.0">Posted </span><span data-reactid=".27y9sg2kcu8.2.0.0.2.1">February 5, 2014</span></em><hr data-reactid=".27y9sg2kcu8.2.0.0.3"><noscript data-reactid=".27y9sg2kcu8.2.0.0.4"></noscript><p data-reactid=".27y9sg2kcu8.2.0.0.5"><img src="/headshot.png" data-reactid=".27y9sg2kcu8.2.0.0.5.0"><span data-reactid=".27y9sg2kcu8.2.0.0.5.1">Written by </span><strong data-reactid=".27y9sg2kcu8.2.0.0.5.2">Chris Biscardi</strong><span data-reactid=".27y9sg2kcu8.2.0.0.5.3"> who lives and works in San Francisco building useful things. </span><a href="https://twitter.com/chrisbiscardi" data-reactid=".27y9sg2kcu8.2.0.0.5.4">Follow on Twitter</a></p></div></div><div data-reactid=".27y9sg2kcu8.2.1"></div></div></div></div><script src="/bundle.js"></script></body></html>