<html lang="en"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" type="text/css" href="/styles.fb354817e9ba604f47bb6a23702bb15a.css"/></head><body class="landing-page"><div id="react-mount"><div data-reactid=".236wcxxtcae" data-react-checksum="35451893"><div class="Nav__wrapper___u7BUA" data-reactid=".236wcxxtcae.0"><nav class="Nav__nav___1e2Pp" data-reactid=".236wcxxtcae.0.0"><a class="Nav__logoWrapper___35yvY" href="/" data-reactid=".236wcxxtcae.0.0.0"><img class="Nav__logo___sw4O9" src="/69305db2985e926d498b513a21d28383.png" data-reactid=".236wcxxtcae.0.0.0.0"/></a><ul class="Nav__items___1oDCD" data-reactid=".236wcxxtcae.0.0.1"><li data-reactid=".236wcxxtcae.0.0.1.0"><a class="Nav__itemLink___H6Isv" href="/posts" data-reactid=".236wcxxtcae.0.0.1.0.0">Posts</a></li><li data-reactid=".236wcxxtcae.0.0.1.1"><a href="https://github.com/ChristopherBiscardi/ama/issues?q=is%3Aissue+is%3Aclosed" class="Nav__itemLink___H6Isv" data-reactid=".236wcxxtcae.0.0.1.1.0">AMA</a></li><li data-reactid=".236wcxxtcae.0.0.1.2"><a class="Nav__itemLink___H6Isv" href="/books" data-reactid=".236wcxxtcae.0.0.1.2.0">Books</a></li><li data-reactid=".236wcxxtcae.0.0.1.3"><a class="Nav__itemLink___H6Isv" href="/projects" data-reactid=".236wcxxtcae.0.0.1.3.0">Projects</a></li></ul></nav></div><div data-reactid=".236wcxxtcae.1"><div class="Post__container___3xG6t" data-reactid=".236wcxxtcae.1.0"><div class="Post__singleColumn___3RGaV" data-reactid=".236wcxxtcae.1.0.0"><h1 class="Post__title___1k3xj" data-reactid=".236wcxxtcae.1.0.0.0">Getting Started with PureScript</h1><div class="Post__meta___1jyEB" data-reactid=".236wcxxtcae.1.0.0.1"><span data-reactid=".236wcxxtcae.1.0.0.1.0">Jun 22nd, 2014</span><span data-reactid=".236wcxxtcae.1.0.0.1.1"> · </span><span data-reactid=".236wcxxtcae.1.0.0.1.2">2</span><span data-reactid=".236wcxxtcae.1.0.0.1.3"> minute read</span></div><div data-reactid=".236wcxxtcae.1.0.0.2"><p>According to <a href="http://www.purescript.org/" title="purescript.org">PureScript.org</a></p>
<blockquote>
<p>PureScript is a small strongly, statically typed programming language with
expressive types, written in and inspired by Haskell, and compiling to
Javascript.</p>
</blockquote>
<p>It’s fairly easy to get started with the <a href="https://github.com/purescript-contrib/grunt-init-purescript" title="grunt
init purescript template">grunt-init-purescript
template</a></p>
<h2 id="dependencies">Dependencies</h2>
<p>We will need
<a href="http://gruntjs.com/">grunt</a>,<a href="https://github.com/gruntjs/grunt-init">grunt-init</a>
and <a href="http://bower.io/">bower</a> to work with this PureScript template.
<a href="http://nodejs.org/" title="nodejs">Node</a> is also a dependency because of this.</p>
<pre class="hljs"><code>npm install -g grunt grunt-init bower
</code></pre>
<p>Then clone the template into a <code>.grunt-init</code> folder using git:</p>
<pre class="hljs"><code>mkdir ~/.grunt-init
git <span class="hljs-built_in">clone</span> https://github.com/purescript-contrib/grunt-init-purescript.git ~/.grunt-init/purescript
</code></pre>
<p>We also need the PureScript compiler, which we can grab with cabal:</p>
<pre class="hljs"><code>cabal install purescript
</code></pre>
<h2 id="developing">Developing</h2>
<p>We can now install dependencies from npm and bower. There’s a decent amount to be excited about in the output including <code>purescript-quickcheck</code>, <code>either</code> and <code>maybe</code> to name a few.</p>
<pre class="hljs"><code>npm install
bower update
</code></pre>
<p>Then grunt when we want to build:</p>
<pre class="hljs"><code>grunt
</code></pre>
<h2 id="testing">Testing</h2>
<p>The template project is more of a library project, where the tests are what we
want to run if we cloned the repo. As such, our <code>Main</code> module is in
<code>tests/Test.purs</code> and can be run using:</p>
<pre class="hljs"><code>node tmp/index.js
</code></pre>
<p>after running <code>grunt</code> to build the project.</p>
<p>To build an executable (a node.js scraper for example) we can make a few
changes.</p>
<h2 id="modifications">Modifications</h2>
<p>First, we’ll make some changes to our test file.</p>
<h4 id="tests">Tests</h4>
<pre class="hljs"><code>mv tests/Tests.purs tests/Test/Main.purs
</code></pre>
<p>and change the module name from <code>Main</code> to <code>Test.Main</code>. Also change the
<code>Starter.Kit.Example</code> import to <code>Starter.Kit.Main</code>.</p>
<h4 id="js">JS</h4>
<p>Place two simple js files in <code>js/</code></p>
<h6 id="jsindexjs">js/index.js</h6>
<pre class="hljs"><code>require(<span class="hljs-string">"Starter.Kit.Main"</span>).main();
</code></pre>
<h6 id="jstestjs">js/test.js</h6>
<pre class="hljs"><code>require(<span class="hljs-string">"Test.Main"</span>).main();
</code></pre>
<h4 id="starter-kit">Starter Kit</h4>
<p>Now we will make a small modification to the Starter Kit file.</p>
<pre class="hljs"><code>mv src/Starter/Kit/Example.purs src/Starter/Kit/Main.purs
</code></pre>
<p>and rename the module to <code>Starter.Kit.Main</code>.</p>
<h4 id="gruntfile">Gruntfile</h4>
<p>Finally make some modifications to the Gruntfile and run <code>grunt</code></p>
<pre class="hljs"><code><span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">grunt</span>) </span>{
<span class="hljs-meta">
  "use strict"</span>;

  grunt.initConfig({

    libFiles: [
      <span class="hljs-string">"src/**/*.purs"</span>,
      <span class="hljs-string">"bower_components/purescript-*/src/**/*.purs"</span>
    ],

    clean: [<span class="hljs-string">"tmp"</span>, <span class="hljs-string">"output"</span>],

    pscMake: {
      lib: {
        src: [<span class="hljs-string">""</span>]
      },
      tests: {
        src: [<span class="hljs-string">"tests/Test/Main.purs"</span>, <span class="hljs-string">""</span>]
      }
    },

    dotPsci: [<span class="hljs-string">""</span>],

    copy: [
      {
        expand: <span class="hljs-literal">true</span>,
        cwd: <span class="hljs-string">"output"</span>,
        src: [<span class="hljs-string">"**"</span>],
        dest: <span class="hljs-string">"tmp/node_modules/"</span>
      }, {
        expand: <span class="hljs-literal">true</span>,
        cwd: <span class="hljs-string">"js/"</span>,
        src: <span class="hljs-string">'**'</span>,
        dest: <span class="hljs-string">"tmp/"</span>,
        flatten: <span class="hljs-literal">true</span>
      }
    ],

    execute: {
      tests: {
        src: <span class="hljs-string">"tmp/test.js"</span>
      }
    }
  });

  grunt.loadNpmTasks(<span class="hljs-string">"grunt-contrib-copy"</span>);
  grunt.loadNpmTasks(<span class="hljs-string">"grunt-contrib-clean"</span>);
  grunt.loadNpmTasks(<span class="hljs-string">"grunt-execute"</span>)
  grunt.loadNpmTasks(<span class="hljs-string">"grunt-purescript"</span>);

  grunt.registerTask(<span class="hljs-string">"test"</span>, [<span class="hljs-string">"pscMake:tests"</span>, <span class="hljs-string">"copy"</span>, <span class="hljs-string">"execute:tests"</span>]);
  grunt.registerTask(<span class="hljs-string">"make"</span>, [<span class="hljs-string">"pscMake:lib"</span>, <span class="hljs-string">"dotPsci"</span>]);
  grunt.registerTask(<span class="hljs-string">"default"</span>, [<span class="hljs-string">"clean"</span>, <span class="hljs-string">"make"</span>, <span class="hljs-string">"test"</span>]);
};
</code></pre>
</div></div></div></div></div></div><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
          ga('create', 'UA-46878058-1', 'auto');
          ga('send', 'pageview');</script></body></html>