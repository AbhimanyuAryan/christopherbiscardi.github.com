<html lang="en"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" type="text/css" href="/styles.9d56a516f70356a9b04feaf105275e9d.css"/></head><body class="landing-page"><div id="react-mount"><div data-reactid=".npgg8xksco" data-react-checksum="1782260622"><div class="Nav__wrapper___u7BUA" data-reactid=".npgg8xksco.0"><nav class="Nav__nav___1e2Pp" data-reactid=".npgg8xksco.0.0"><a class="Nav__logoWrapper___35yvY" href="/" data-reactid=".npgg8xksco.0.0.0"><img class="Nav__logo___sw4O9" src="/69305db2985e926d498b513a21d28383.png" data-reactid=".npgg8xksco.0.0.0.0"/></a><ul class="Nav__items___1oDCD" data-reactid=".npgg8xksco.0.0.1"><li data-reactid=".npgg8xksco.0.0.1.0"><a class="Nav__itemLink___H6Isv" href="/posts" data-reactid=".npgg8xksco.0.0.1.0.0">Posts</a></li><li data-reactid=".npgg8xksco.0.0.1.1"><a href="https://github.com/ChristopherBiscardi/ama" class="Nav__itemLink___H6Isv" data-reactid=".npgg8xksco.0.0.1.1.0">AMA</a></li><li data-reactid=".npgg8xksco.0.0.1.2"><a class="Nav__itemLink___H6Isv" href="/books" data-reactid=".npgg8xksco.0.0.1.2.0">Books</a></li><li data-reactid=".npgg8xksco.0.0.1.3"><a class="Nav__itemLink___H6Isv" href="/projects" data-reactid=".npgg8xksco.0.0.1.3.0">Projects</a></li></ul></nav></div><div data-reactid=".npgg8xksco.1"><div class="Post__container___3xG6t" data-reactid=".npgg8xksco.1.0"><div class="Post__singleColumn___3RGaV" data-reactid=".npgg8xksco.1.0.0"><h1 class="Post__title___1k3xj" data-reactid=".npgg8xksco.1.0.0.0">Handling Taps on List/Grid Items with ViewPagers (GestureDetector)</h1><div class="Post__meta___1jyEB" data-reactid=".npgg8xksco.1.0.0.1"><span data-reactid=".npgg8xksco.1.0.0.1.0">Apr 9th, 2014</span><span data-reactid=".npgg8xksco.1.0.0.1.1"> · </span><span data-reactid=".npgg8xksco.1.0.0.1.2">1</span><span data-reactid=".npgg8xksco.1.0.0.1.3"> minute read</span></div><div data-reactid=".npgg8xksco.1.0.0.2"><p>When placing a ViewPager inside of a GridView recently I ran into the issue of
the ViewPager stealing the GridView Items’ click event. I had lost my click
event, but the ViewPager was still scrolling fine.</p>
<p>With the following GridView:</p>
<pre class="hljs"><code><span class="php"><span class="hljs-meta">&lt;?</span>xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"utf-8"</span><span class="hljs-meta">?&gt;</span></span>
<span class="hljs-tag">&lt;<span class="hljs-name">FrameLayout</span>
    <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>
    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">GridView</span>
        <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/bar_gridview"</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
        <span class="hljs-attr">android:verticalSpacing</span>=<span class="hljs-string">"0dp"</span>
        <span class="hljs-attr">android:horizontalSpacing</span>=<span class="hljs-string">"0dp"</span>
        <span class="hljs-attr">android:stretchMode</span>=<span class="hljs-string">"columnWidth"</span>
        <span class="hljs-attr">android:numColumns</span>=<span class="hljs-string">"1"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">FrameLayout</span>&gt;</span>
</code></pre>
<p>and a grid item view with a ViewPager (reduced for simplicity):</p>
<pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">com.christopherbiscardi.grid.MyGridItemFrame</span> <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>
    <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/grid_item_frame"</span>
    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span> &gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">com.christopherbiscardi.grid.MyViewPager</span>
        <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/my_pager"</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span> /&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">com.christopherbiscardi.grid.MyGridItemFrame</span>&gt;</span>
</code></pre>
<p>We can intercept the touch event on MyGridItemFrame, which sits between the
GridView and the ViewPager by extending
<code>GestureDetector.SimpleOnGestureListener</code> and overriding
<code>onInterceptTouchEvent</code>. In this case all we care about is handling the tap
(<code>onSingleTapUp</code>) and we will let the scroll pass through to the ViewPager.</p>
<pre class="hljs"><code><span class="hljs-keyword">package</span> com.christopherbiscardi.grid;

<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyGridItemFrame</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">FrameLayout</span> </span>{

	<span class="hljs-keyword">final</span> GestureDetector mGestureDetector = <span class="hljs-keyword">new</span> GestureDetector(<span class="hljs-keyword">new</span> MyGestureListener());

	<span class="hljs-meta">@Override</span>
	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">onInterceptTouchEvent</span><span class="hljs-params">(MotionEvent event)</span> </span>{
		<span class="hljs-keyword">return</span> mGestureDetector.onTouchEvent(event);
	}


	<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyGestureListener</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">GestureDetector</span>.<span class="hljs-title">SimpleOnGestureListener</span> </span>{

		<span class="hljs-meta">@Override</span>
		<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">onSingleTapUp</span><span class="hljs-params">(MotionEvent event)</span> </span>{
			Toast.makeText(getContext(), <span class="hljs-string">"clicked Grid Item"</span>, Toast.LENGTH_SHORT).show();
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
		}
	}
}
</code></pre>
</div></div></div></div></div></div><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
          ga('create', 'UA-46878058-1', 'auto');
          ga('send', 'pageview');</script></body></html>