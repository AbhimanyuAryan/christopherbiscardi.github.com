{"data":{"root":{"post":{"body":"<p>In this post we will deploy our Snap app to Heroku.</p>\n<p><a href=\"http://www.christopherbiscardi.com/2014/01/07/getting-started-with-snap-and-user-authentication-part-1/\">part 1</a>\n<a href=\"http://www.christopherbiscardi.com/2014/01/10/getting-started-with-snap-and-user-authentication-part-2/\">part 2</a>\n<a href=\"http://www.christopherbiscardi.com/2014/01/11/getting-started-with-snap-and-user-authentication-part-3/\">part 3</a></p>\n<p>First, we need to put a <code>Procfile</code> in the root of our project; Save this as\n<code>Procfile</code></p>\n<pre class=\"highlight__hljs___FzKxy index__p2___65FBl\"><code>web: cabal run -- -p $PORT\n</code></pre>\n<p>If you’ve been following along and haven’t yet put the code into version\ncontrol, now is the time to do that by running <code>git init</code>, <code>git add</code> and <code>git commit -m &quot;message&quot;</code>.</p>\n<p>This command will create a new Heroku app with a Haskell buildpack. You can find\nmore information on the buildpack\n<a href=\"https://github.com/begriffs/heroku-buildpack-ghc\">here</a></p>\n<pre class=\"highlight__hljs___FzKxy index__p2___65FBl\"><code>heroku create --stack=cedar --buildpack https://github.com/begriffs/heroku-buildpack-ghc.git\n</code></pre>\n<blockquote>\n<p>note: You can now deploy the app to Heroku, but you will get an error about connecting to PostgreSQL</p>\n</blockquote>\n<p>At this point we have two basic choices: We can run PostgreSQL as a Heroku\nextension or we can host PostgreSQL somewhere else. For this example, we’ll\nhosting elsewhere. <code>devel.cfg</code> looks like this:</p>\n<pre class=\"highlight__hljs___FzKxy index__p2___65FBl\"><code>host = <span class=\"highlight__hljs-string___1SffY\">\"localhost\"</span>\nport = <span class=\"highlight__hljs-number___2gmaH\">5432</span>\nuser = <span class=\"highlight__hljs-string___1SffY\">\"postgres\"</span>\npass = <span class=\"highlight__hljs-string___1SffY\">\"\"</span>\ndb = <span class=\"highlight__hljs-string___1SffY\">\"testdb\"</span>\n\n<span class=\"highlight__hljs-comment___UYk12\"># Nmuber of distinct connection pools to maintain.  The smallest acceptable</span>\n<span class=\"highlight__hljs-comment___UYk12\"># value is 1.</span>\nnumStripes = <span class=\"highlight__hljs-number___2gmaH\">1</span>\n\n<span class=\"highlight__hljs-comment___UYk12\"># Number of seconds an unused resource is kept open.  The smallest acceptable</span>\n<span class=\"highlight__hljs-comment___UYk12\"># value is 0.5 seconds.</span>\nidleTime = <span class=\"highlight__hljs-number___2gmaH\">5</span>\n\n<span class=\"highlight__hljs-comment___UYk12\"># Maximum number of resources to keep open per stripe.  The smallest</span>\n<span class=\"highlight__hljs-comment___UYk12\"># acceptable value is 1.</span>\nmaxResourcesPerStripe = <span class=\"highlight__hljs-number___2gmaH\">20</span>\n</code></pre>\n<p>The final option is to just host PostgreSQL somewhere other than Heroku and\nmodify the config file to point there.</p>\n<p><a href=\"http://res.cloudinary.com/diqzbm8lz/image/upload/v1428611521/CBLogo_2014_transparent_swcmig.png\"><img src=\"http://res.cloudinary.com/diqzbm8lz/image/upload/h_300,w_300/v1428611521/CBLogo_2014_transparent_swcmig.png\" alt=\"CBLogo_2014_transparent\"></a></p>\n","attributes":{"title":"Deploy Haskell's Snap on Heroku","updatedAt":"Feb 2nd, 2014","publishedAt":"Feb 2nd, 2014","timeToRead":1,"headerImage":null,"url":"/2014/2/2/deploy-haskells-snap-on-heroku/","canonicalURL":null,"excerpt":"In this post we will deploy our Snap app to Heroku.","__typename":"BlogPostAttributes"},"__typename":"BlogPost"},"__typename":"Query"}}}