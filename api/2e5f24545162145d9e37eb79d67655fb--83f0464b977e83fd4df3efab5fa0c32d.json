{"data":{"root":{"post":{"body":"<p>In this post we will be using curl to construct a geospatial index using Riak\nSearch 2 (also known as Yokozuna) which is backed by Solr.</p>\n<p>I’ll be using <a href=\"http://docs.basho.com/riak/2.0.0pre11/downloads/\">Riak Pre11</a> for\nthis.</p>\n<p>In <code>etc/riak.conf</code> change <code>search</code> to <code>on</code>:\n(It was on line 411 for me)</p>\n<pre class=\"highlight__hljs___FzKxy index__p2___65FBl\"><code>search = on\n</code></pre>\n<p>Make sure your <code>ulimit</code> is 4096 or greater:</p>\n<pre class=\"highlight__hljs___FzKxy index__p2___65FBl\"><code><span class=\"highlight__hljs-built_in___3uuyR\">ulimit</span> -n 4096\n</code></pre>\n<p>Then start Riak. I’m using <code>console</code> myself, but <code>start</code> would also work.</p>\n<pre class=\"highlight__hljs___FzKxy index__p2___65FBl\"><code>./bin/riak console\n</code></pre>\n<h2 id=\"creating-a-schema\">Creating a Schema</h2>\n<p>Let’s create a schema so that Solr indexes our data correctly (file available\n<a href=\"https://gist.github.com/ChristopherBiscardi/8876815\">here</a>):</p>\n<pre class=\"highlight__hljs___FzKxy index__p2___65FBl\"><code><span class=\"php\"><span class=\"hljs-meta\">&lt;?</span>xml version=<span class=\"highlight__hljs-string___1SffY\">\"1.0\"</span> encoding=<span class=\"highlight__hljs-string___1SffY\">\"UTF-8\"</span><span class=\"hljs-meta\">?&gt;</span></span>\n<span class=\"highlight__hljs-tag___2Bb-l\">&lt;<span class=\"hljs-name\">schema</span> <span class=\"hljs-attr\">name</span>=<span class=\"highlight__hljs-string___1SffY\">\"geotest\"</span> <span class=\"hljs-attr\">version</span>=<span class=\"highlight__hljs-string___1SffY\">\"1.5\"</span>&gt;</span>\n  <span class=\"highlight__hljs-tag___2Bb-l\">&lt;<span class=\"hljs-name\">uniqueKey</span>&gt;</span>_yz_id\n  <span class=\"highlight__hljs-tag___2Bb-l\">&lt;<span class=\"hljs-name\">fields</span>&gt;</span>\n    <span class=\"highlight__hljs-tag___2Bb-l\">&lt;<span class=\"hljs-name\">field</span> <span class=\"hljs-attr\">name</span>=<span class=\"highlight__hljs-string___1SffY\">\"name\"</span> <span class=\"hljs-attr\">type</span>=<span class=\"highlight__hljs-string___1SffY\">\"string\"</span> <span class=\"hljs-attr\">indexed</span>=<span class=\"highlight__hljs-string___1SffY\">\"true\"</span> <span class=\"hljs-attr\">stored</span>=<span class=\"highlight__hljs-string___1SffY\">\"true\"</span>/&gt;</span>\n    <span class=\"highlight__hljs-tag___2Bb-l\">&lt;<span class=\"hljs-name\">field</span> <span class=\"hljs-attr\">name</span>=<span class=\"highlight__hljs-string___1SffY\">\"loc\"</span>  <span class=\"hljs-attr\">type</span>=<span class=\"highlight__hljs-string___1SffY\">\"location_rpt\"</span>  <span class=\"hljs-attr\">indexed</span>=<span class=\"highlight__hljs-string___1SffY\">\"true\"</span> <span class=\"hljs-attr\">stored</span>=<span class=\"highlight__hljs-string___1SffY\">\"true\"</span>/&gt;</span>\n\n    <span class=\"highlight__hljs-comment___UYk12\">&lt;!-- Begin Yokozuna Fields --&gt;</span>\n   <span class=\"highlight__hljs-tag___2Bb-l\">&lt;<span class=\"hljs-name\">field</span> <span class=\"hljs-attr\">name</span>=<span class=\"highlight__hljs-string___1SffY\">\"_yz_id\"</span> <span class=\"hljs-attr\">type</span>=<span class=\"highlight__hljs-string___1SffY\">\"_yz_str\"</span> <span class=\"hljs-attr\">indexed</span>=<span class=\"highlight__hljs-string___1SffY\">\"true\"</span> <span class=\"hljs-attr\">stored</span>=<span class=\"highlight__hljs-string___1SffY\">\"true\"</span> <span class=\"hljs-attr\">required</span>=<span class=\"highlight__hljs-string___1SffY\">\"true\"</span> /&gt;</span>\n\n   <span class=\"highlight__hljs-tag___2Bb-l\">&lt;<span class=\"hljs-name\">field</span> <span class=\"hljs-attr\">name</span>=<span class=\"highlight__hljs-string___1SffY\">\"text\"</span> <span class=\"hljs-attr\">type</span>=<span class=\"highlight__hljs-string___1SffY\">\"text_ws\"</span> <span class=\"hljs-attr\">indexed</span>=<span class=\"highlight__hljs-string___1SffY\">\"true\"</span> <span class=\"hljs-attr\">stored</span>=<span class=\"highlight__hljs-string___1SffY\">\"false\"</span> <span class=\"hljs-attr\">multiValued</span>=<span class=\"highlight__hljs-string___1SffY\">\"true\"</span>/&gt;</span>\n\n   <span class=\"highlight__hljs-tag___2Bb-l\">&lt;<span class=\"hljs-name\">field</span> <span class=\"hljs-attr\">name</span>=<span class=\"highlight__hljs-string___1SffY\">\"_version_\"</span> <span class=\"hljs-attr\">type</span>=<span class=\"highlight__hljs-string___1SffY\">\"long\"</span> <span class=\"hljs-attr\">indexed</span>=<span class=\"highlight__hljs-string___1SffY\">\"true\"</span> <span class=\"hljs-attr\">stored</span>=<span class=\"highlight__hljs-string___1SffY\">\"true\"</span>/&gt;</span>\n\n   <span class=\"highlight__hljs-comment___UYk12\">&lt;!-- Entropy Data: Data related to anti-entropy --&gt;</span>\n   <span class=\"highlight__hljs-tag___2Bb-l\">&lt;<span class=\"hljs-name\">field</span> <span class=\"hljs-attr\">name</span>=<span class=\"highlight__hljs-string___1SffY\">\"_yz_ed\"</span> <span class=\"hljs-attr\">type</span>=<span class=\"highlight__hljs-string___1SffY\">\"_yz_str\"</span> <span class=\"hljs-attr\">indexed</span>=<span class=\"highlight__hljs-string___1SffY\">\"true\"</span> <span class=\"hljs-attr\">stored</span>=<span class=\"highlight__hljs-string___1SffY\">\"false\"</span>/&gt;</span>\n\n   <span class=\"highlight__hljs-comment___UYk12\">&lt;!-- Partition Number: Used as a filter query param --&gt;</span>\n   <span class=\"highlight__hljs-tag___2Bb-l\">&lt;<span class=\"hljs-name\">field</span> <span class=\"hljs-attr\">name</span>=<span class=\"highlight__hljs-string___1SffY\">\"_yz_pn\"</span> <span class=\"hljs-attr\">type</span>=<span class=\"highlight__hljs-string___1SffY\">\"_yz_str\"</span> <span class=\"hljs-attr\">indexed</span>=<span class=\"highlight__hljs-string___1SffY\">\"true\"</span> <span class=\"hljs-attr\">stored</span>=<span class=\"highlight__hljs-string___1SffY\">\"false\"</span>/&gt;</span>\n\n   <span class=\"highlight__hljs-comment___UYk12\">&lt;!-- First Partition Number: The first partition in this doc's\n        preflist, used for further filtering on overlapping partitions. --&gt;</span>\n   <span class=\"highlight__hljs-tag___2Bb-l\">&lt;<span class=\"hljs-name\">field</span> <span class=\"hljs-attr\">name</span>=<span class=\"highlight__hljs-string___1SffY\">\"_yz_fpn\"</span> <span class=\"hljs-attr\">type</span>=<span class=\"highlight__hljs-string___1SffY\">\"_yz_str\"</span> <span class=\"hljs-attr\">indexed</span>=<span class=\"highlight__hljs-string___1SffY\">\"true\"</span> <span class=\"hljs-attr\">stored</span>=<span class=\"highlight__hljs-string___1SffY\">\"false\"</span>/&gt;</span>\n\n   <span class=\"highlight__hljs-comment___UYk12\">&lt;!-- If there is a sibling, use vtag to differentiate them --&gt;</span>\n   <span class=\"highlight__hljs-tag___2Bb-l\">&lt;<span class=\"hljs-name\">field</span> <span class=\"hljs-attr\">name</span>=<span class=\"highlight__hljs-string___1SffY\">\"_yz_vtag\"</span> <span class=\"hljs-attr\">type</span>=<span class=\"highlight__hljs-string___1SffY\">\"_yz_str\"</span> <span class=\"hljs-attr\">indexed</span>=<span class=\"highlight__hljs-string___1SffY\">\"true\"</span> <span class=\"hljs-attr\">stored</span>=<span class=\"highlight__hljs-string___1SffY\">\"false\"</span>/&gt;</span>\n\n   <span class=\"highlight__hljs-comment___UYk12\">&lt;!-- Node: The name of the node that this doc was created on. --&gt;</span>\n   <span class=\"highlight__hljs-tag___2Bb-l\">&lt;<span class=\"hljs-name\">field</span> <span class=\"hljs-attr\">name</span>=<span class=\"highlight__hljs-string___1SffY\">\"_yz_node\"</span> <span class=\"hljs-attr\">type</span>=<span class=\"highlight__hljs-string___1SffY\">\"_yz_str\"</span> <span class=\"hljs-attr\">indexed</span>=<span class=\"highlight__hljs-string___1SffY\">\"true\"</span> <span class=\"hljs-attr\">stored</span>=<span class=\"highlight__hljs-string___1SffY\">\"false\"</span>/&gt;</span>\n\n   <span class=\"highlight__hljs-tag___2Bb-l\">&lt;<span class=\"hljs-name\">field</span> <span class=\"hljs-attr\">name</span>=<span class=\"highlight__hljs-string___1SffY\">\"_yz_rt\"</span> <span class=\"hljs-attr\">type</span>=<span class=\"highlight__hljs-string___1SffY\">\"_yz_str\"</span> <span class=\"hljs-attr\">indexed</span>=<span class=\"highlight__hljs-string___1SffY\">\"true\"</span> <span class=\"hljs-attr\">stored</span>=<span class=\"highlight__hljs-string___1SffY\">\"true\"</span>/&gt;</span>\n\n   <span class=\"highlight__hljs-comment___UYk12\">&lt;!-- Riak Bucket: The bucket of the Riak object this doc corresponds to. --&gt;</span>\n   <span class=\"highlight__hljs-tag___2Bb-l\">&lt;<span class=\"hljs-name\">field</span> <span class=\"hljs-attr\">name</span>=<span class=\"highlight__hljs-string___1SffY\">\"_yz_rb\"</span> <span class=\"hljs-attr\">type</span>=<span class=\"highlight__hljs-string___1SffY\">\"_yz_str\"</span> <span class=\"hljs-attr\">indexed</span>=<span class=\"highlight__hljs-string___1SffY\">\"true\"</span> <span class=\"hljs-attr\">stored</span>=<span class=\"highlight__hljs-string___1SffY\">\"true\"</span>/&gt;</span>\n\n   <span class=\"highlight__hljs-comment___UYk12\">&lt;!-- Riak Key: The key of the Riak object this doc corresponds to. --&gt;</span>\n   <span class=\"highlight__hljs-tag___2Bb-l\">&lt;<span class=\"hljs-name\">field</span> <span class=\"hljs-attr\">name</span>=<span class=\"highlight__hljs-string___1SffY\">\"_yz_rk\"</span> <span class=\"hljs-attr\">type</span>=<span class=\"highlight__hljs-string___1SffY\">\"_yz_str\"</span> <span class=\"hljs-attr\">indexed</span>=<span class=\"highlight__hljs-string___1SffY\">\"true\"</span> <span class=\"hljs-attr\">stored</span>=<span class=\"highlight__hljs-string___1SffY\">\"true\"</span>/&gt;</span>\n\n   <span class=\"highlight__hljs-comment___UYk12\">&lt;!-- Node: Stores a flag if this doc is the product of a failed object extration --&gt;</span>\n   <span class=\"highlight__hljs-tag___2Bb-l\">&lt;<span class=\"hljs-name\">field</span> <span class=\"hljs-attr\">name</span>=<span class=\"highlight__hljs-string___1SffY\">\"_yz_err\"</span> <span class=\"hljs-attr\">type</span>=<span class=\"highlight__hljs-string___1SffY\">\"_yz_str\"</span> <span class=\"hljs-attr\">indexed</span>=<span class=\"highlight__hljs-string___1SffY\">\"true\"</span> <span class=\"hljs-attr\">stored</span>=<span class=\"highlight__hljs-string___1SffY\">\"false\"</span>/&gt;</span>\n  <span class=\"highlight__hljs-tag___2Bb-l\">&lt;/<span class=\"hljs-name\">fields</span>&gt;</span>\n  <span class=\"highlight__hljs-tag___2Bb-l\">&lt;<span class=\"hljs-name\">types</span>&gt;</span>\n    <span class=\"highlight__hljs-tag___2Bb-l\">&lt;<span class=\"hljs-name\">fieldType</span> <span class=\"hljs-attr\">name</span>=<span class=\"highlight__hljs-string___1SffY\">\"location_rpt\"</span>   <span class=\"hljs-attr\">class</span>=<span class=\"highlight__hljs-string___1SffY\">\"solr.SpatialRecursivePrefixTreeFieldType\"</span>\n\t               <span class=\"hljs-attr\">spatialContextFactory</span>=<span class=\"highlight__hljs-string___1SffY\">\"com.spatial4j.core.context.jts.JtsSpatialContextFactory\"</span>\n\t               <span class=\"hljs-attr\">distErrPct</span>=<span class=\"highlight__hljs-string___1SffY\">\"0.025\"</span>\n\t               <span class=\"hljs-attr\">maxDistErr</span>=<span class=\"highlight__hljs-string___1SffY\">\"0.000009\"</span>\n\t               <span class=\"hljs-attr\">units</span>=<span class=\"highlight__hljs-string___1SffY\">\"degrees\"</span>\n\t            /&gt;</span>\n    <span class=\"highlight__hljs-comment___UYk12\">&lt;!-- since fields of this type are by default not stored or indexed,\n         any data added to them will be ignored outright.  --&gt;</span>\n    <span class=\"highlight__hljs-tag___2Bb-l\">&lt;<span class=\"hljs-name\">fieldtype</span> <span class=\"hljs-attr\">name</span>=<span class=\"highlight__hljs-string___1SffY\">\"ignored\"</span> <span class=\"hljs-attr\">stored</span>=<span class=\"highlight__hljs-string___1SffY\">\"false\"</span> <span class=\"hljs-attr\">indexed</span>=<span class=\"highlight__hljs-string___1SffY\">\"false\"</span> <span class=\"hljs-attr\">multiValued</span>=<span class=\"highlight__hljs-string___1SffY\">\"true\"</span> <span class=\"hljs-attr\">class</span>=<span class=\"highlight__hljs-string___1SffY\">\"solr.StrField\"</span> /&gt;</span>\n\n    <span class=\"highlight__hljs-comment___UYk12\">&lt;!-- YZ String: Used for non-analyzed fields --&gt;</span>\n    <span class=\"highlight__hljs-tag___2Bb-l\">&lt;<span class=\"hljs-name\">fieldType</span> <span class=\"hljs-attr\">name</span>=<span class=\"highlight__hljs-string___1SffY\">\"_yz_str\"</span> <span class=\"hljs-attr\">class</span>=<span class=\"highlight__hljs-string___1SffY\">\"solr.StrField\"</span> <span class=\"hljs-attr\">sortMissingLast</span>=<span class=\"highlight__hljs-string___1SffY\">\"true\"</span>/&gt;</span>\n    <span class=\"highlight__hljs-tag___2Bb-l\">&lt;<span class=\"hljs-name\">fieldType</span> <span class=\"hljs-attr\">name</span>=<span class=\"highlight__hljs-string___1SffY\">\"string\"</span> <span class=\"hljs-attr\">class</span>=<span class=\"highlight__hljs-string___1SffY\">\"solr.StrField\"</span> <span class=\"hljs-attr\">sortMissingLast</span>=<span class=\"highlight__hljs-string___1SffY\">\"true\"</span>/&gt;</span>\n    <span class=\"highlight__hljs-tag___2Bb-l\">&lt;<span class=\"hljs-name\">fieldType</span> <span class=\"hljs-attr\">name</span>=<span class=\"highlight__hljs-string___1SffY\">\"boolean\"</span> <span class=\"hljs-attr\">class</span>=<span class=\"highlight__hljs-string___1SffY\">\"solr.BoolField\"</span> <span class=\"hljs-attr\">sortMissingLast</span>=<span class=\"highlight__hljs-string___1SffY\">\"true\"</span>/&gt;</span>\n    <span class=\"highlight__hljs-tag___2Bb-l\">&lt;<span class=\"hljs-name\">fieldType</span> <span class=\"hljs-attr\">name</span>=<span class=\"highlight__hljs-string___1SffY\">\"int\"</span> <span class=\"hljs-attr\">class</span>=<span class=\"highlight__hljs-string___1SffY\">\"solr.TrieIntField\"</span> <span class=\"hljs-attr\">precisionStep</span>=<span class=\"highlight__hljs-string___1SffY\">\"0\"</span> <span class=\"hljs-attr\">positionIncrementGap</span>=<span class=\"highlight__hljs-string___1SffY\">\"0\"</span>/&gt;</span>\n    <span class=\"highlight__hljs-tag___2Bb-l\">&lt;<span class=\"hljs-name\">fieldType</span> <span class=\"hljs-attr\">name</span>=<span class=\"highlight__hljs-string___1SffY\">\"float\"</span> <span class=\"hljs-attr\">class</span>=<span class=\"highlight__hljs-string___1SffY\">\"solr.TrieFloatField\"</span> <span class=\"hljs-attr\">precisionStep</span>=<span class=\"highlight__hljs-string___1SffY\">\"0\"</span> <span class=\"hljs-attr\">positionIncrementGap</span>=<span class=\"highlight__hljs-string___1SffY\">\"0\"</span>/&gt;</span>\n    <span class=\"highlight__hljs-tag___2Bb-l\">&lt;<span class=\"hljs-name\">fieldType</span> <span class=\"hljs-attr\">name</span>=<span class=\"highlight__hljs-string___1SffY\">\"long\"</span> <span class=\"hljs-attr\">class</span>=<span class=\"highlight__hljs-string___1SffY\">\"solr.TrieLongField\"</span> <span class=\"hljs-attr\">precisionStep</span>=<span class=\"highlight__hljs-string___1SffY\">\"0\"</span> <span class=\"hljs-attr\">positionIncrementGap</span>=<span class=\"highlight__hljs-string___1SffY\">\"0\"</span>/&gt;</span>\n    <span class=\"highlight__hljs-tag___2Bb-l\">&lt;<span class=\"hljs-name\">fieldType</span> <span class=\"hljs-attr\">name</span>=<span class=\"highlight__hljs-string___1SffY\">\"double\"</span> <span class=\"hljs-attr\">class</span>=<span class=\"highlight__hljs-string___1SffY\">\"solr.TrieDoubleField\"</span> <span class=\"hljs-attr\">precisionStep</span>=<span class=\"highlight__hljs-string___1SffY\">\"0\"</span> <span class=\"hljs-attr\">positionIncrementGap</span>=<span class=\"highlight__hljs-string___1SffY\">\"0\"</span>/&gt;</span>\n    <span class=\"highlight__hljs-comment___UYk12\">&lt;!--\n     Numeric field types that index each value at various levels of precision\n     to accelerate range queries when the number of values between the range\n     endpoints is large. See the javadoc for NumericRangeQuery for internal\n     implementation details.\n\n     Smaller precisionStep values (specified in bits) will lead to more tokens\n     indexed per value, slightly larger index size, and faster range queries.\n     A precisionStep of 0 disables indexing at different precision levels.\n    --&gt;</span>\n    <span class=\"highlight__hljs-tag___2Bb-l\">&lt;<span class=\"hljs-name\">fieldType</span> <span class=\"hljs-attr\">name</span>=<span class=\"highlight__hljs-string___1SffY\">\"tint\"</span> <span class=\"hljs-attr\">class</span>=<span class=\"highlight__hljs-string___1SffY\">\"solr.TrieIntField\"</span> <span class=\"hljs-attr\">precisionStep</span>=<span class=\"highlight__hljs-string___1SffY\">\"8\"</span> <span class=\"hljs-attr\">positionIncrementGap</span>=<span class=\"highlight__hljs-string___1SffY\">\"0\"</span>/&gt;</span>\n    <span class=\"highlight__hljs-tag___2Bb-l\">&lt;<span class=\"hljs-name\">fieldType</span> <span class=\"hljs-attr\">name</span>=<span class=\"highlight__hljs-string___1SffY\">\"tfloat\"</span> <span class=\"hljs-attr\">class</span>=<span class=\"highlight__hljs-string___1SffY\">\"solr.TrieFloatField\"</span> <span class=\"hljs-attr\">precisionStep</span>=<span class=\"highlight__hljs-string___1SffY\">\"8\"</span> <span class=\"hljs-attr\">positionIncrementGap</span>=<span class=\"highlight__hljs-string___1SffY\">\"0\"</span>/&gt;</span>\n    <span class=\"highlight__hljs-tag___2Bb-l\">&lt;<span class=\"hljs-name\">fieldType</span> <span class=\"hljs-attr\">name</span>=<span class=\"highlight__hljs-string___1SffY\">\"tlong\"</span> <span class=\"hljs-attr\">class</span>=<span class=\"highlight__hljs-string___1SffY\">\"solr.TrieLongField\"</span> <span class=\"hljs-attr\">precisionStep</span>=<span class=\"highlight__hljs-string___1SffY\">\"8\"</span> <span class=\"hljs-attr\">positionIncrementGap</span>=<span class=\"highlight__hljs-string___1SffY\">\"0\"</span>/&gt;</span>\n    <span class=\"highlight__hljs-tag___2Bb-l\">&lt;<span class=\"hljs-name\">fieldType</span> <span class=\"hljs-attr\">name</span>=<span class=\"highlight__hljs-string___1SffY\">\"tdouble\"</span> <span class=\"hljs-attr\">class</span>=<span class=\"highlight__hljs-string___1SffY\">\"solr.TrieDoubleField\"</span> <span class=\"hljs-attr\">precisionStep</span>=<span class=\"highlight__hljs-string___1SffY\">\"8\"</span> <span class=\"hljs-attr\">positionIncrementGap</span>=<span class=\"highlight__hljs-string___1SffY\">\"0\"</span>/&gt;</span>\n    <span class=\"highlight__hljs-tag___2Bb-l\">&lt;<span class=\"hljs-name\">fieldType</span> <span class=\"hljs-attr\">name</span>=<span class=\"highlight__hljs-string___1SffY\">\"date\"</span> <span class=\"hljs-attr\">class</span>=<span class=\"highlight__hljs-string___1SffY\">\"solr.TrieDateField\"</span> <span class=\"hljs-attr\">precisionStep</span>=<span class=\"highlight__hljs-string___1SffY\">\"0\"</span> <span class=\"hljs-attr\">positionIncrementGap</span>=<span class=\"highlight__hljs-string___1SffY\">\"0\"</span>/&gt;</span>\n    <span class=\"highlight__hljs-comment___UYk12\">&lt;!-- A Trie based date field for faster date range queries and date faceting. --&gt;</span>\n    <span class=\"highlight__hljs-tag___2Bb-l\">&lt;<span class=\"hljs-name\">fieldType</span> <span class=\"hljs-attr\">name</span>=<span class=\"highlight__hljs-string___1SffY\">\"tdate\"</span> <span class=\"hljs-attr\">class</span>=<span class=\"highlight__hljs-string___1SffY\">\"solr.TrieDateField\"</span> <span class=\"hljs-attr\">precisionStep</span>=<span class=\"highlight__hljs-string___1SffY\">\"6\"</span> <span class=\"hljs-attr\">positionIncrementGap</span>=<span class=\"highlight__hljs-string___1SffY\">\"0\"</span>/&gt;</span>\n    <span class=\"highlight__hljs-comment___UYk12\">&lt;!--Binary data type. The data should be sent/retrieved in as Base64 encoded Strings --&gt;</span>\n    <span class=\"highlight__hljs-tag___2Bb-l\">&lt;<span class=\"hljs-name\">fieldtype</span> <span class=\"hljs-attr\">name</span>=<span class=\"highlight__hljs-string___1SffY\">\"binary\"</span> <span class=\"hljs-attr\">class</span>=<span class=\"highlight__hljs-string___1SffY\">\"solr.BinaryField\"</span>/&gt;</span>\n    <span class=\"highlight__hljs-tag___2Bb-l\">&lt;<span class=\"hljs-name\">fieldType</span> <span class=\"hljs-attr\">name</span>=<span class=\"highlight__hljs-string___1SffY\">\"random\"</span> <span class=\"hljs-attr\">class</span>=<span class=\"highlight__hljs-string___1SffY\">\"solr.RandomSortField\"</span> <span class=\"hljs-attr\">indexed</span>=<span class=\"highlight__hljs-string___1SffY\">\"true\"</span>/&gt;</span>\n    <span class=\"highlight__hljs-comment___UYk12\">&lt;!-- A text field that only splits on whitespace for exact matching of words --&gt;</span>\n    <span class=\"highlight__hljs-tag___2Bb-l\">&lt;<span class=\"hljs-name\">fieldType</span> <span class=\"hljs-attr\">name</span>=<span class=\"highlight__hljs-string___1SffY\">\"text_ws\"</span> <span class=\"hljs-attr\">class</span>=<span class=\"highlight__hljs-string___1SffY\">\"solr.TextField\"</span> <span class=\"hljs-attr\">positionIncrementGap</span>=<span class=\"highlight__hljs-string___1SffY\">\"100\"</span>&gt;</span>\n      <span class=\"highlight__hljs-tag___2Bb-l\">&lt;<span class=\"hljs-name\">analyzer</span>&gt;</span>\n        <span class=\"highlight__hljs-tag___2Bb-l\">&lt;<span class=\"hljs-name\">tokenizer</span> <span class=\"hljs-attr\">class</span>=<span class=\"highlight__hljs-string___1SffY\">\"solr.WhitespaceTokenizerFactory\"</span>/&gt;</span>\n      <span class=\"highlight__hljs-tag___2Bb-l\">&lt;/<span class=\"hljs-name\">analyzer</span>&gt;</span>\n    <span class=\"highlight__hljs-tag___2Bb-l\">&lt;/<span class=\"hljs-name\">fieldType</span>&gt;</span>\n    <span class=\"highlight__hljs-comment___UYk12\">&lt;!-- A general text field that has reasonable, generic\n         cross-language defaults: it tokenizes with StandardTokenizer,\n         removes stop words from case-insensitive \"stopwords.txt\"\n         (empty by default), and down cases.  At query time only, it\n         also applies synonyms. --&gt;</span>\n    <span class=\"highlight__hljs-tag___2Bb-l\">&lt;<span class=\"hljs-name\">fieldType</span> <span class=\"hljs-attr\">name</span>=<span class=\"highlight__hljs-string___1SffY\">\"text_general\"</span> <span class=\"hljs-attr\">class</span>=<span class=\"highlight__hljs-string___1SffY\">\"solr.TextField\"</span> <span class=\"hljs-attr\">positionIncrementGap</span>=<span class=\"highlight__hljs-string___1SffY\">\"100\"</span>&gt;</span>\n      <span class=\"highlight__hljs-tag___2Bb-l\">&lt;<span class=\"hljs-name\">analyzer</span> <span class=\"hljs-attr\">type</span>=<span class=\"highlight__hljs-string___1SffY\">\"index\"</span>&gt;</span>\n        <span class=\"highlight__hljs-tag___2Bb-l\">&lt;<span class=\"hljs-name\">tokenizer</span> <span class=\"hljs-attr\">class</span>=<span class=\"highlight__hljs-string___1SffY\">\"solr.StandardTokenizerFactory\"</span>/&gt;</span>\n        <span class=\"highlight__hljs-tag___2Bb-l\">&lt;<span class=\"hljs-name\">filter</span> <span class=\"hljs-attr\">class</span>=<span class=\"highlight__hljs-string___1SffY\">\"solr.StopFilterFactory\"</span> <span class=\"hljs-attr\">ignoreCase</span>=<span class=\"highlight__hljs-string___1SffY\">\"true\"</span> <span class=\"hljs-attr\">words</span>=<span class=\"highlight__hljs-string___1SffY\">\"stopwords.txt\"</span>/&gt;</span>\n        <span class=\"highlight__hljs-tag___2Bb-l\">&lt;<span class=\"hljs-name\">filter</span> <span class=\"hljs-attr\">class</span>=<span class=\"highlight__hljs-string___1SffY\">\"solr.LowerCaseFilterFactory\"</span>/&gt;</span>\n      <span class=\"highlight__hljs-tag___2Bb-l\">&lt;/<span class=\"hljs-name\">analyzer</span>&gt;</span>\n      <span class=\"highlight__hljs-tag___2Bb-l\">&lt;<span class=\"hljs-name\">analyzer</span> <span class=\"hljs-attr\">type</span>=<span class=\"highlight__hljs-string___1SffY\">\"query\"</span>&gt;</span>\n        <span class=\"highlight__hljs-tag___2Bb-l\">&lt;<span class=\"hljs-name\">tokenizer</span> <span class=\"hljs-attr\">class</span>=<span class=\"highlight__hljs-string___1SffY\">\"solr.StandardTokenizerFactory\"</span>/&gt;</span>\n        <span class=\"highlight__hljs-tag___2Bb-l\">&lt;<span class=\"hljs-name\">filter</span> <span class=\"hljs-attr\">class</span>=<span class=\"highlight__hljs-string___1SffY\">\"solr.StopFilterFactory\"</span> <span class=\"hljs-attr\">ignoreCase</span>=<span class=\"highlight__hljs-string___1SffY\">\"true\"</span> <span class=\"hljs-attr\">words</span>=<span class=\"highlight__hljs-string___1SffY\">\"stopwords.txt\"</span>/&gt;</span>\n        <span class=\"highlight__hljs-tag___2Bb-l\">&lt;<span class=\"hljs-name\">filter</span> <span class=\"hljs-attr\">class</span>=<span class=\"highlight__hljs-string___1SffY\">\"solr.SynonymFilterFactory\"</span> <span class=\"hljs-attr\">synonyms</span>=<span class=\"highlight__hljs-string___1SffY\">\"synonyms.txt\"</span> <span class=\"hljs-attr\">ignoreCase</span>=<span class=\"highlight__hljs-string___1SffY\">\"true\"</span> <span class=\"hljs-attr\">expand</span>=<span class=\"highlight__hljs-string___1SffY\">\"true\"</span>/&gt;</span>\n        <span class=\"highlight__hljs-tag___2Bb-l\">&lt;<span class=\"hljs-name\">filter</span> <span class=\"hljs-attr\">class</span>=<span class=\"highlight__hljs-string___1SffY\">\"solr.LowerCaseFilterFactory\"</span>/&gt;</span>\n      <span class=\"highlight__hljs-tag___2Bb-l\">&lt;/<span class=\"hljs-name\">analyzer</span>&gt;</span>\n    <span class=\"highlight__hljs-tag___2Bb-l\">&lt;/<span class=\"hljs-name\">fieldType</span>&gt;</span>\n  <span class=\"highlight__hljs-tag___2Bb-l\">&lt;/<span class=\"hljs-name\">types</span>&gt;</span>\n<span class=\"highlight__hljs-tag___2Bb-l\">&lt;/<span class=\"hljs-name\">schema</span>&gt;</span>\n</code></pre>\n<p>The important parts here are the schema name being <code>geotest</code></p>\n<pre class=\"highlight__hljs___FzKxy index__p2___65FBl\"><code><span class=\"highlight__hljs-tag___2Bb-l\">&lt;<span class=\"hljs-name\">schema</span> <span class=\"hljs-attr\">name</span>=<span class=\"highlight__hljs-string___1SffY\">\"geotest\"</span> <span class=\"hljs-attr\">version</span>=<span class=\"highlight__hljs-string___1SffY\">\"1.5\"</span>&gt;</span>\n</code></pre>\n<p>our two fields. <code>name</code> and <code>loc</code></p>\n<pre class=\"highlight__hljs___FzKxy index__p2___65FBl\"><code>    <span class=\"highlight__hljs-tag___2Bb-l\">&lt;<span class=\"hljs-name\">field</span> <span class=\"hljs-attr\">name</span>=<span class=\"highlight__hljs-string___1SffY\">\"name\"</span> <span class=\"hljs-attr\">type</span>=<span class=\"highlight__hljs-string___1SffY\">\"string\"</span> <span class=\"hljs-attr\">indexed</span>=<span class=\"highlight__hljs-string___1SffY\">\"true\"</span> <span class=\"hljs-attr\">stored</span>=<span class=\"highlight__hljs-string___1SffY\">\"true\"</span>/&gt;</span>\n    <span class=\"highlight__hljs-tag___2Bb-l\">&lt;<span class=\"hljs-name\">field</span> <span class=\"hljs-attr\">name</span>=<span class=\"highlight__hljs-string___1SffY\">\"loc\"</span>  <span class=\"hljs-attr\">type</span>=<span class=\"highlight__hljs-string___1SffY\">\"location_rpt\"</span>  <span class=\"hljs-attr\">indexed</span>=<span class=\"highlight__hljs-string___1SffY\">\"true\"</span> <span class=\"hljs-attr\">stored</span>=<span class=\"highlight__hljs-string___1SffY\">\"true\"</span>/&gt;</span>```\n\nand our fieldType `location_rpt`\n\n```xml\n\t<span class=\"highlight__hljs-tag___2Bb-l\">&lt;<span class=\"hljs-name\">fieldType</span> <span class=\"hljs-attr\">name</span>=<span class=\"highlight__hljs-string___1SffY\">\"location_rpt\"</span>   <span class=\"hljs-attr\">class</span>=<span class=\"highlight__hljs-string___1SffY\">\"solr.SpatialRecursivePrefixTreeFieldType\"</span>\n\t               <span class=\"hljs-attr\">distErrPct</span>=<span class=\"highlight__hljs-string___1SffY\">\"0.025\"</span>\n\t               <span class=\"hljs-attr\">maxDistErr</span>=<span class=\"highlight__hljs-string___1SffY\">\"0.000009\"</span>\n\t               <span class=\"hljs-attr\">units</span>=<span class=\"highlight__hljs-string___1SffY\">\"degrees\"</span>\n\t            /&gt;</span>\n</code></pre>\n<p>Pretty much everything else is boilerplate so that the Riak Solr integration\nworks.</p>\n<h2 id=\"upload-schema\">Upload Schema</h2>\n<p>We can now upload this schema (I saved the schema above as schema.xml in my\ncurrent directory):</p>\n<pre class=\"highlight__hljs___FzKxy index__p2___65FBl\"><code>curl -i -XPUT http://localhost:8098/search/schema/geotest \\\n  -H <span class=\"highlight__hljs-string___1SffY\">'content-type: application/xml'</span> \\\n  --data-binary @schema.xml\n</code></pre>\n<h2 id=\"create-index\">Create Index</h2>\n<p>…and we create an index named “my_geo_index” which uses the schema (name =\n“geotest”) we just uploaded.</p>\n<pre class=\"highlight__hljs___FzKxy index__p2___65FBl\"><code>curl -i -XPUT http://localhost:8098/search/index/my_geo_index \\\n  -H <span class=\"highlight__hljs-string___1SffY\">'content-type: application/json'</span> \\\n  <span class=\"hljs-_\">-d</span> <span class=\"highlight__hljs-string___1SffY\">'{\"schema\":\"geotest\"}'</span>\n</code></pre>\n<p>They should both return 204 responses.</p>\n<h2 id=\"create-bucket-type\">Create Bucket Type</h2>\n<p>Next we’ll create a bucket type named “geo_type” using the <code>riak-admin</code> command.\nOur bucket type won’t have any special properties, it just needs to exist.</p>\n<pre class=\"highlight__hljs___FzKxy index__p2___65FBl\"><code>./bin/riak-admin bucket-type create geo_<span class=\"highlight__hljs-built_in___3uuyR\">type</span> <span class=\"highlight__hljs-string___1SffY\">'{\"props\":{}}'</span>\n</code></pre>\n<h2 id=\"activate-bucket-type\">Activate Bucket Type</h2>\n<p>We also need to activate our new bucket type:</p>\n<pre class=\"highlight__hljs___FzKxy index__p2___65FBl\"><code>./bin/riak-admin bucket-type activate geo_<span class=\"highlight__hljs-built_in___3uuyR\">type</span>\n</code></pre>\n<h2 id=\"create-bucket\">Create Bucket</h2>\n<p>We will now create a bucket named “stuff” under the <code>geo_type</code> bucket type. In\naddition, this command associates the Solr index <code>my_geo_index</code> with the bucket\n<code>stuff</code></p>\n<pre class=\"highlight__hljs___FzKxy index__p2___65FBl\"><code>curl -XPUT <span class=\"highlight__hljs-string___1SffY\">'http://localhost:8098/types/geo_type/buckets/stuff/props'</span> \\\n  -H <span class=\"highlight__hljs-string___1SffY\">'content-type: application/json'</span> \\\n  <span class=\"hljs-_\">-d</span> <span class=\"highlight__hljs-string___1SffY\">'{\"props\":{\"search_index\":\"my_geo_index\"}}'</span>\n</code></pre>\n<h2 id=\"indexing-data\">Indexing Data</h2>\n<p>That’s it. Let’s index some data!</p>\n<pre class=\"highlight__hljs___FzKxy index__p2___65FBl\"><code>curl -i -H <span class=\"highlight__hljs-string___1SffY\">'content-type: application/json'</span> -X PUT <span class=\"highlight__hljs-string___1SffY\">'http://localhost:8098/types/geo_type/buckets/stuff/keys/sf'</span> <span class=\"hljs-_\">-d</span> <span class=\"highlight__hljs-string___1SffY\">'{\"name\":\"San Francisco\", \"loc\":\"37.774929,-122.419416\"}'</span>\ncurl -i -H <span class=\"highlight__hljs-string___1SffY\">'content-type: application/json'</span> -X PUT <span class=\"highlight__hljs-string___1SffY\">'http://localhost:8098/types/geo_type/buckets/stuff/keys/sj'</span> <span class=\"hljs-_\">-d</span> <span class=\"highlight__hljs-string___1SffY\">'{\"name\":\"San Jose\", \"loc\":\"37.339386,-121.894955\"}'</span>\ncurl -i -H <span class=\"highlight__hljs-string___1SffY\">'content-type: application/json'</span> -X PUT <span class=\"highlight__hljs-string___1SffY\">'http://localhost:8098/types/geo_type/buckets/stuff/keys/mv'</span> <span class=\"hljs-_\">-d</span> <span class=\"highlight__hljs-string___1SffY\">'{\"name\":\"Mountain View\", \"loc\":\"37.386052,-122.083851\"}'</span>\n</code></pre>\n<h2 id=\"querying\">Querying</h2>\n<p>Now for the fun part. Let’s find all of our data, scored and sorted by distance.\nThe score will return a distance (in degrees). We are querying from a location\nin Palo Alto, California, so we should see fairly small distances to Mountain\nView, San Jose and San Francisco.</p>\n<pre class=\"highlight__hljs___FzKxy index__p2___65FBl\"><code>curl <span class=\"highlight__hljs-string___1SffY\">'http://localhost:8098/search/my_geo_index?&amp;fl=*,score&amp;sort=score%20asc&amp;q={!geofilt%20score=distance%20filter=false%20sfield=loc%20pt=37.441883,-122.143019%20d=10}&amp;wt=json'</span>\n</code></pre>\n<p>The query returns the results:</p>\n<pre class=\"highlight__hljs___FzKxy index__p2___65FBl\"><code>{\n   <span class=\"highlight__hljs-string___1SffY\">\"responseHeader\"</span>:{\n      <span class=\"highlight__hljs-string___1SffY\">\"status\"</span>:<span class=\"highlight__hljs-number___2gmaH\">0</span>,\n      <span class=\"highlight__hljs-string___1SffY\">\"QTime\"</span>:<span class=\"highlight__hljs-number___2gmaH\">24</span>,\n      <span class=\"highlight__hljs-string___1SffY\">\"params\"</span>:{\n         <span class=\"highlight__hljs-string___1SffY\">\"shards\"</span>:<span class=\"highlight__hljs-string___1SffY\">\"127.0.0.1:8093/solr/my_geo_index\"</span>,\n         <span class=\"highlight__hljs-string___1SffY\">\"sort\"</span>:<span class=\"highlight__hljs-string___1SffY\">\"score asc\"</span>,\n         <span class=\"highlight__hljs-string___1SffY\">\"fl\"</span>:<span class=\"highlight__hljs-string___1SffY\">\"*,score\"</span>,\n         <span class=\"highlight__hljs-string___1SffY\">\"q\"</span>:<span class=\"highlight__hljs-string___1SffY\">\"{!geofilt score=distance filter=false sfield=loc pt=37.441883,-122.143019 d=10}\"</span>,\n         <span class=\"highlight__hljs-string___1SffY\">\"127.0.0.1:8093\"</span>:<span class=\"highlight__hljs-string___1SffY\">\"_yz_pn:64 OR (_yz_pn:61 AND (_yz_fpn:61)) OR _yz_pn:60 OR _yz_pn:57 OR _yz_pn:54 OR _yz_pn:51 OR _yz_pn:48 OR _yz_pn:45 OR _yz_pn:42 OR _yz_pn:39 OR _yz_pn:36 OR _yz_pn:33 OR _yz_pn:30 OR _yz_pn:27 OR _yz_pn:24 OR _yz_pn:21 OR _yz_pn:18 OR _yz_pn:15 OR _yz_pn:12 OR _yz_pn:9 OR _yz_pn:6 OR _yz_pn:3\"</span>,\n         <span class=\"highlight__hljs-string___1SffY\">\"wt\"</span>:<span class=\"highlight__hljs-string___1SffY\">\"json\"</span>\n      }\n   },\n   <span class=\"highlight__hljs-string___1SffY\">\"response\"</span>:{\n      <span class=\"highlight__hljs-string___1SffY\">\"numFound\"</span>:<span class=\"highlight__hljs-number___2gmaH\">4</span>,\n      <span class=\"highlight__hljs-string___1SffY\">\"start\"</span>:<span class=\"highlight__hljs-number___2gmaH\">0</span>,\n      <span class=\"highlight__hljs-string___1SffY\">\"maxScore\"</span>:<span class=\"highlight__hljs-number___2gmaH\">0.39857662</span>,\n      <span class=\"highlight__hljs-string___1SffY\">\"docs\"</span>:[\n         {\n            <span class=\"highlight__hljs-string___1SffY\">\"loc\"</span>:<span class=\"highlight__hljs-string___1SffY\">\"37.386052,-122.083851\"</span>,\n            <span class=\"highlight__hljs-string___1SffY\">\"name\"</span>:<span class=\"highlight__hljs-string___1SffY\">\"Mountain View\"</span>,\n            <span class=\"highlight__hljs-string___1SffY\">\"_yz_id\"</span>:<span class=\"highlight__hljs-string___1SffY\">\"geo_type_stuff_mv_42\"</span>,\n            <span class=\"highlight__hljs-string___1SffY\">\"_yz_rk\"</span>:<span class=\"highlight__hljs-string___1SffY\">\"mv\"</span>,\n            <span class=\"highlight__hljs-string___1SffY\">\"_yz_rt\"</span>:<span class=\"highlight__hljs-string___1SffY\">\"geo_type\"</span>,\n            <span class=\"highlight__hljs-string___1SffY\">\"_yz_rb\"</span>:<span class=\"highlight__hljs-string___1SffY\">\"stuff\"</span>,\n            <span class=\"highlight__hljs-string___1SffY\">\"score\"</span>:<span class=\"highlight__hljs-number___2gmaH\">0.072977245</span>\n         },\n         {\n            <span class=\"highlight__hljs-string___1SffY\">\"loc\"</span>:<span class=\"highlight__hljs-string___1SffY\">\"37.339386,-121.894955\"</span>,\n            <span class=\"highlight__hljs-string___1SffY\">\"name\"</span>:<span class=\"highlight__hljs-string___1SffY\">\"San Jose\"</span>,\n            <span class=\"highlight__hljs-string___1SffY\">\"_yz_id\"</span>:<span class=\"highlight__hljs-string___1SffY\">\"geo_type_stuff_sj_21\"</span>,\n            <span class=\"highlight__hljs-string___1SffY\">\"_yz_rk\"</span>:<span class=\"highlight__hljs-string___1SffY\">\"sj\"</span>,\n            <span class=\"highlight__hljs-string___1SffY\">\"_yz_rt\"</span>:<span class=\"highlight__hljs-string___1SffY\">\"geo_type\"</span>,\n            <span class=\"highlight__hljs-string___1SffY\">\"_yz_rb\"</span>:<span class=\"highlight__hljs-string___1SffY\">\"stuff\"</span>,\n            <span class=\"highlight__hljs-string___1SffY\">\"score\"</span>:<span class=\"highlight__hljs-number___2gmaH\">0.2221485</span>\n         },\n         {\n            <span class=\"highlight__hljs-string___1SffY\">\"loc\"</span>:<span class=\"highlight__hljs-string___1SffY\">\"37.774929,-122.419416\"</span>,\n            <span class=\"highlight__hljs-string___1SffY\">\"name\"</span>:<span class=\"highlight__hljs-string___1SffY\">\"San Francisco\"</span>,\n            <span class=\"highlight__hljs-string___1SffY\">\"_yz_id\"</span>:<span class=\"highlight__hljs-string___1SffY\">\"geo_type_stuff_sf_60_MeNonMcIRG8mmdJpk5KfM\"</span>,\n            <span class=\"highlight__hljs-string___1SffY\">\"_yz_rk\"</span>:<span class=\"highlight__hljs-string___1SffY\">\"sf\"</span>,\n            <span class=\"highlight__hljs-string___1SffY\">\"_yz_rt\"</span>:<span class=\"highlight__hljs-string___1SffY\">\"geo_type\"</span>,\n            <span class=\"highlight__hljs-string___1SffY\">\"_yz_rb\"</span>:<span class=\"highlight__hljs-string___1SffY\">\"stuff\"</span>,\n            <span class=\"highlight__hljs-string___1SffY\">\"score\"</span>:<span class=\"highlight__hljs-number___2gmaH\">0.39857662</span>\n         },\n         {\n            <span class=\"highlight__hljs-string___1SffY\">\"loc\"</span>:<span class=\"highlight__hljs-string___1SffY\">\"37.774929,-122.419416\"</span>,\n            <span class=\"highlight__hljs-string___1SffY\">\"name\"</span>:<span class=\"highlight__hljs-string___1SffY\">\"San Francisco\"</span>,\n            <span class=\"highlight__hljs-string___1SffY\">\"_yz_id\"</span>:<span class=\"highlight__hljs-string___1SffY\">\"geo_type_stuff_sf_60_5n4gT2r1Gt2qlHwfKCwypL\"</span>,\n            <span class=\"highlight__hljs-string___1SffY\">\"_yz_rk\"</span>:<span class=\"highlight__hljs-string___1SffY\">\"sf\"</span>,\n            <span class=\"highlight__hljs-string___1SffY\">\"_yz_rt\"</span>:<span class=\"highlight__hljs-string___1SffY\">\"geo_type\"</span>,\n            <span class=\"highlight__hljs-string___1SffY\">\"_yz_rb\"</span>:<span class=\"highlight__hljs-string___1SffY\">\"stuff\"</span>,\n            <span class=\"highlight__hljs-string___1SffY\">\"score\"</span>:<span class=\"highlight__hljs-number___2gmaH\">0.39857662</span>\n         }\n      ]\n   }\n}\n</code></pre>\n<p>You’ll notice that there are two San Franciscos. This is because I inserted data\ntwice into Riak without using a VClock the second time (While I was writing this\npost), resulting in siblings. This issue is easily resolvable by resolving the\nsiblings as mentioned\n<a href=\"http://docs.basho.com/riak/latest/theory/concepts/Vector-Clocks/\">here</a>.</p>\n<p>Now, we can convert to miles by multiplying the score (which is degrees) by\n<code>69.09341</code>. If we do this for San Jose it would be <code>.2221485 * 69.09341</code>, or\nabout <code>15.34 mi</code>.</p>\n<p>For Kilometers we use <code>111.1951</code>, which gives us about <code>24.7 km</code>.</p>\n<p>Since our query location was from Palo Alto, California, we can see that San\nJose is indeed, approximately that 15 miles away. Our search was successful!</p>\n","attributes":{"title":"GeoSpatial Indexing with Riak Search 2.0 (Yokozuna/Solr)","updatedAt":"Feb 7th, 2014","publishedAt":"Feb 7th, 2014","timeToRead":7,"headerImage":null,"url":"/2014/2/7/geospatial-indexing-with-riak-search-2-0-yokozunasolr/","canonicalURL":null,"excerpt":"In this post we will be using curl to construct a geospatial index using Riak\nSearch 2 (also known as Yokozuna) which is backed by Solr.","__typename":"BlogPostAttributes"},"__typename":"BlogPost"},"__typename":"Query"}}}