{"data":{"post":{"body":"<p>I think <a href=\"http://learnyouahaskell.com/starting-out#im-a-list-comprehension\">list comprehensions</a> are my favorite reason to pull out Haskell.</p>\n<p>For example: I was recently asked this:</p>\n<p>You have a row of 100 school lockers. For each number from 1 to 100 walk down the line of lockers starting at the beginning, and switch the state of every nth locker. All of the lockers start closed.</p>\n<p>For example:<br>\nwe start off at 1 and switch all the lockers to open. (1,2,3,4,5,…)<br>\nwe then go to 2 and switch all of the lockers evenly divisible by 2. (2,4,6,8…)<br>\nfor 3 we flip every 3rd locker (3,6,9,12,…)<br>\n4 is every 4th locker. (4,8,12,16,…)<br>\netc.</p>\n<h4>Answer Below This Line</h4>\n<p>In Haskell this is easily accomplished using a list comprehension.</p>\n<p>We can observe through trial (ie: actually flipping every locker) that the lockers are flipped by their factors. (ie: 6 is flipped by 1,2,3,and 6), so we’ll write a quick comprehension to give us the factors of a number:</p>\n<p>In this example, we get the factors of 6</p>\n<pre><code><span class=\"xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">code</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">\"haskell\"</span>&gt;</span></span>\n[x | x <span class=\"hljs-code\">```</span>\n\nlinks:  \n[<span class=\"hljs-string\">[1..6</span>]](http://learnyouahaskell.com/starting-out#texas-ranges)  \n[<span class=\"hljs-string\">modulo</span>](<span class=\"hljs-link\">http://en.wikipedia.org/wiki/Modulo_operation</span>)  \n[<span class=\"hljs-string\">mod</span>](<span class=\"hljs-link\">http://zvon.org/other/haskell/Outputprelude/mod_f.html</span>)  \n[<span class=\"hljs-string\">`infix`</span>](<span class=\"hljs-link\">http://www.haskell.org/haskellwiki/Infix_operator</span>)\n\nEssentially you can read the above code as\n\n</code></pre>\n<code class=\"haskell\">\nGive me x where x is [1,2,3,4,5,6] and 6 is evenly divisible by x\n```\n<p>and breaking it down:</p>\n<pre><code>&lt;code <span class=\"hljs-built_in\">class</span>=<span class=\"hljs-string\">\"haskell\"</span>&gt;\nGive <span class=\"hljs-keyword\">me</span> x\n[x\n\n<span class=\"hljs-keyword\">where</span>\n|\n\nx\n\n<span class=\"hljs-keyword\">is</span>\n</code></pre>\n<p>We can then realize that if you flip something an even number of times, nothing changes. This means we’re looking for the number with an odd number of factors because we want the lockers that are open at the end.</p>\n<p>The code to determine an open locker will look like this, where factors is the code we just wrote.</p>\n<pre><code>&lt;code <span class=\"hljs-built_in\">class</span>=<span class=\"hljs-string\">\"haskell\"</span>&gt;\n<span class=\"hljs-built_in\">length</span> factors `<span class=\"hljs-keyword\">mod</span>` <span class=\"hljs-number\">2</span> == <span class=\"hljs-number\">1</span>\n</code></pre>\n<p>If we stick that in a list comprehension for all numbers [1…100] we have effectively filtered out all of the open lockers.</p>\n<pre><code>&lt;code class=<span class=\"hljs-string\">\"haskell\"</span>&gt;\n[n | n ```\n\nBut <span class=\"hljs-keyword\">wait</span>! There<span class=\"hljs-symbol\">'s</span> more! <span class=\"hljs-keyword\">For</span> the low low price <span class=\"hljs-keyword\">of</span> $<span class=\"hljs-number\">19.95</span> we can realize there<span class=\"hljs-symbol\">'s</span> a pattern <span class=\"hljs-keyword\">in</span> the results.  \n The pattern happens <span class=\"hljs-keyword\">to</span> be perfect squares. This <span class=\"hljs-keyword\">is</span> because perfect squares are the only numbers <span class=\"hljs-keyword\">with</span> an odd number <span class=\"hljs-keyword\">of</span> factors!\n\n<span class=\"hljs-keyword\">for</span> example:  \n <span class=\"hljs-number\">9</span><span class=\"hljs-symbol\">'s</span> factors are <span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">3</span> <span class=\"hljs-keyword\">and</span> <span class=\"hljs-number\">9</span>.  \n <span class=\"hljs-keyword\">While</span> <span class=\"hljs-number\">8</span><span class=\"hljs-symbol\">'s</span> factors are <span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">2</span>,<span class=\"hljs-number\">4</span> <span class=\"hljs-keyword\">and</span> <span class=\"hljs-number\">8</span>\n\nWe can now write a far more efficient list comprehension.\n\n</code></pre>\n<code class=\"haskell\">\n[x*x | x ```\n<p>Which can be read as:<br>\ngive me x*x where x is [1,2,3,4,5,6,7,8,9,10]</p>\n<p>We can also expand this into an function using an infinite list, just in case we want to calculate how many lockers are open if we have 50081 lockers.</p>\n<pre><code>&lt;code <span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">\"haskell\"</span>&gt;\nlet lockers = [<span class=\"hljs-keyword\">x</span>*<span class=\"hljs-keyword\">x</span> | <span class=\"hljs-keyword\">x</span> ```\n\n\n</code></pre>\n"}}}